@using System.Text.Json
@using MyWebsite.Domain.Entities

@{
    var companyInfo = Context.Items["CompanyInfo"] as CompanyInfo;
    var welcomeMessage = "Rất vui khi được hỗ trợ bạn!";
    var zaloUrl = "https://zalo.me/" + companyInfo?.ZaloNumber;

    string logoBase64 = null;
    if (companyInfo?.Logo != null)
    {
        logoBase64 = $"data:image/png;base64,{Convert.ToBase64String(companyInfo.Logo)}";
    }

    var waBtnSetting = JsonSerializer.Serialize(new WhatsAppButtonSetting
            {
                BtnColor = "#16BE45",
                CtaText = "",
                CornerRadius = 40,
                MarginBottom = 65,
                MarginLeft = 20,
                MarginRight = 12,
                BtnPosition = "right",
                WhatsAppNumber = companyInfo?.WhatsAppNumber ?? "",
                WelcomeMessage = welcomeMessage,
                ZIndex = 999999,
                BtnColorScheme = "light"
            }, new JsonSerializerOptions { PropertyNamingPolicy = JsonNamingPolicy.CamelCase });
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>@ViewData["Title"]</title>
    <meta name="description" content="">
    <meta name="keywords" content="">

    <!-- Favicons -->
    @if (!string.IsNullOrEmpty(logoBase64))
    {
        <link id="dynamic-favicon" rel="icon" href="data:;base64,iVBORw0KGgo=">
        <script>
            (function () {
                var link = document.getElementById('dynamic-favicon');
                link.href = '@Html.Raw(logoBase64)';
            })();
        </script>
    }
    else
    {
        <link href="~/client/assets/img/favicon.png" rel="icon">
        <link href="~/client/assets/img/apple-touch-icon.png" rel="apple-touch-icon">
    }

    <!-- Place favicon.png in the root directory -->
    <link rel="shortcut icon" href="~/client/assets/img/favicon.png" type="image/x-icon" />
    <!-- Font Icons css -->
    <link rel="stylesheet" href="~/client/assets/css/font-icons.css">
    <!-- plugins css -->
    <link rel="stylesheet" href="~/client/assets/css/plugins.css">
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="~/client/assets/css/style.css">
    <!-- Responsive css -->
    <link rel="stylesheet" href="~/client/assets/css/responsive.css">

    <link href="~/client/assets/vendor/zalo/zalo1.css" rel="stylesheet" />

</head>
<body>

    <!-- Body main wrapper start -->
<div class="body-wrapper">

    <!-- HEADER AREA START (header-4) -->
    @await Html.PartialAsync("_Header", companyInfo)
    <!-- HEADER AREA END -->

        @RenderBody()

    <!-- FOOTER AREA START -->
    @await Html.PartialAsync("_Footer", companyInfo)
    <!-- FOOTER AREA END -->

    <!-- MODAL AREA START (Quick View Modal) -->
    <div class="ltn__modal-area ltn__quick-view-modal-area">
        <div class="modal fade" id="quick_view_modal" tabindex="-1">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                            <!-- <i class="fas fa-times"></i> -->
                        </button>
                    </div>
                    <div class="modal-body">
                         <div class="ltn__quick-view-modal-inner">
                             <div class="modal-product-item">
                                <div class="row">
                                    <div class="col-lg-6 col-12">
                                        <div class="modal-product-img">
                                            <img src="~/client/assets/img/product/4.png" alt="#">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-12">
                                        <div class="modal-product-info">
                                            <div class="product-ratting">
                                                <ul>
                                                    <li><a href="#"><i class="fas fa-star"></i></a></li>
                                                    <li><a href="#"><i class="fas fa-star"></i></a></li>
                                                    <li><a href="#"><i class="fas fa-star"></i></a></li>
                                                    <li><a href="#"><i class="fas fa-star-half-alt"></i></a></li>
                                                    <li><a href="#"><i class="far fa-star"></i></a></li>
                                                    <li class="review-total"> <a href="#"> ( 95 Reviews )</a></li>
                                                </ul>
                                            </div>
                                            <h3>Brake Conversion Kit</h3>
                                            <div class="product-price">
                                                <span>$149.00</span>
                                                <del>$165.00</del>
                                            </div>
                                            <div class="modal-product-meta ltn__product-details-menu-1">
                                                <ul>
                                                    <li>
                                                        <strong>Categories:</strong> 
                                                        <span>
                                                            <a href="#">Parts</a>
                                                            <a href="#">Car</a>
                                                            <a href="#">Seat</a>
                                                            <a href="#">Cover</a>
                                                        </span>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="ltn__product-details-menu-2">
                                                <ul>
                                                    <li>
                                                        <div class="cart-plus-minus">
                                                            <input type="text" value="02" name="qtybutton" class="cart-plus-minus-box">
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <a href="#" class="theme-btn-1 btn btn-effect-1" title="Add to Cart" data-bs-toggle ="modal" data-bs-target="#add_to_cart_modal">
                                                            <i class="fas fa-shopping-cart"></i>
                                                            <span>ADD TO CART</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="ltn__product-details-menu-3">
                                                <ul>
                                                    <li>
                                                        <a href="#" class="" title="Wishlist" data-bs-toggle ="modal" data-bs-target="#liton_wishlist_modal">
                                                            <i class="far fa-heart"></i>
                                                            <span>Add to Wishlist</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="#" class="" title="Compare" data-bs-toggle ="modal" data-bs-target="#quick_view_modal">
                                                            <i class="fas fa-exchange-alt"></i>
                                                            <span>Compare</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <hr>
                                            <div class="ltn__social-media">
                                                <ul>
                                                    <li>Share:</li>
                                                    <li><a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a></li>
                                                    <li><a href="#" title="Twitter"><i class="fab fa-twitter"></i></a></li>
                                                    <li><a href="#" title="Linkedin"><i class="fab fa-linkedin"></i></a></li>
                                                    <li><a href="#" title="Instagram"><i class="fab fa-instagram"></i></a></li>
                                                    
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                             </div>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL AREA END -->

    <!-- MODAL AREA START (Add To Cart Modal) -->
    <div class="ltn__modal-area ltn__add-to-cart-modal-area">
        <div class="modal fade" id="add_to_cart_modal" tabindex="-1">
            <div class="modal-dialog modal-md" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                         <div class="ltn__quick-view-modal-inner">
                             <div class="modal-product-item">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="modal-product-img">
                                            <img src="~/client/assets/img/product/1.png" alt="#">
                                        </div>
                                         <div class="modal-product-info">
                                            <h5><a href="product-details.html">Brake Conversion Kit</a></h5>
                                            <p class="added-cart"><i class="fa fa-check-circle"></i>  Successfully added to your Cart</p>
                                            <div class="btn-wrapper">
                                                <a href="cart.html" class="theme-btn-1 btn btn-effect-1">View Cart</a>
                                                <a href="checkout.html" class="theme-btn-2 btn btn-effect-2">Checkout</a>
                                            </div>
                                         </div>
                                         <!-- additional-info -->
                                         <div class="additional-info d-none">
                                            <p>We want to give you <b>10% discount</b> for your first order, <br>  Use discount code at checkout</p>
                                            <div class="payment-method">
                                                <img src="~/client/assets/img/icons/payment.png" alt="#">
                                            </div>
                                         </div>
                                    </div>
                                </div>
                             </div>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL AREA END -->

    <!-- MODAL AREA START (Wishlist Modal) -->
    <div class="ltn__modal-area ltn__add-to-cart-modal-area">
        <div class="modal fade" id="liton_wishlist_modal" tabindex="-1">
            <div class="modal-dialog modal-md" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                         <div class="ltn__quick-view-modal-inner">
                             <div class="modal-product-item">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="modal-product-img">
                                            <img src="~/client/assets/img/product/7.png" alt="#">
                                        </div>
                                         <div class="modal-product-info">
                                            <h5><a href="product-details.html">Brake Conversion Kit</a></h5>
                                            <p class="added-cart"><i class="fa fa-check-circle"></i>  Successfully added to your Wishlist</p>
                                            <div class="btn-wrapper">
                                                <a href="wishlist.html" class="theme-btn-1 btn btn-effect-1">View Wishlist</a>
                                            </div>
                                         </div>
                                         <!-- additional-info -->
                                         <div class="additional-info d-none">
                                            <p>We want to give you <b>10% discount</b> for your first order, <br>  Use discount code at checkout</p>
                                            <div class="payment-method">
                                                <img src="~/client/assets/img/icons/payment.png" alt="#">
                                            </div>
                                         </div>
                                    </div>
                                </div>
                             </div>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL AREA END -->

</div>
<!-- Body main wrapper end -->    

    @if (!string.IsNullOrEmpty(companyInfo?.WhatsAppNumber))
    {
        <!-- WhatsApp: https://www.delightchat.io/whatsapp-chat-button-widget -->
        <script src="~/client/assets/vendor/whatsapp/embed.min.js"></script>
        <script>
            var wa_btnSetting = @Html.Raw(waBtnSetting);
            window.onload = () => {
                _waEmbed(wa_btnSetting);
            };
        </script>
    }

    @if (!string.IsNullOrEmpty(companyInfo?.ZaloOaId))
    {
        <!-- Zalo: https://developers.zalo.me/docs/social/zalo-chat-widget -->
        <div class="zalo-chat-widget" data-oaid=@companyInfo?.ZaloOaId data-welcome-message=@welcomeMessage data-autopopup="0" data-width="300" data-height="300"></div>
        <style>
            .zalo-chat-widget {
                bottom: 120px !important;
                right: 10px !important;
            }
        </style>

        <script src="~/client/assets/vendor/zalo/sdk.js"></script>
    }
    else if (!string.IsNullOrEmpty(companyInfo?.ZaloNumber))
    {
        <!-- Zalo: https://vutruso.com/contact-me-on-zalo/ -->
        <div class="zalo-container right">
            <a id="zalo-btn" href="@zaloUrl" target="_blank" rel="noopener nofollow">
                <span><img src="~/client/assets/vendor/zalo/zalo-2.png" alt="Contact Me on Zalo"></span>
            </a>
        </div>
    }

    <!-- preloader area start -->
    <div class="preloader d-none" id="preloader">
        <div class="preloader-inner">
            <div class="spinner">
                <div class="dot1"></div>
                <div class="dot2"></div>
            </div>
        </div>
    </div>
    <!-- preloader area end -->

    <!-- All JS Plugins -->
    <script src="~/client/assets/js/plugins.js"></script>
    <!-- Main JS -->
    <script src="~/client/assets/js/main.js"></script>

    <!-- Main JS File -->
    <script src="~/client/assets/js/main.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
